<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" charset="utf-8">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    {% load cookielaw_tags %}
    {% load static %}
    {% load i18n %}
    {% load account %}

    <title>{% block head_title %}{% endblock %} | TrainerDex</title>
    <meta name="description" content="{% trans 'TrainerDex provides leaderboards and stats related to Pokemon Go. Join now!' context 'meta tag in head' %}">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="{% static 'img/android-desktop.png' %}">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="TrainerDex">
    <link rel="apple-touch-icon-precomposed" href="{% static 'img/ios-desktop.png' %}">
    <link rel="fluid-icon" type="image/png" href="{% static 'img/ios-desktop.png' %}" />
    <meta name="msapplication-TileImage" content="{% static 'img/ms-touch-icon.png' %}">
    <meta name="msapplication-TileColor" content="#f2f2f2">
    <link rel="shortcut icon" href="{% static 'img/favicon.png' %}">
    <link rel="icon" href="{% static 'img/favicon.ico' %}" type="image/x-icon" />
    <meta property="og:site_name" content="TrainerDex" />
    <meta name="fb:page_id" content="1683676791663912" />
    <meta name="msvalidate.01" content="E7E20ABA1E037AC0B7E0116E01E3337A" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdl-ext@0.17.1/lib/mdl-ext.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link href="https://fonts.googleapis.com/css?family=Raleway:300,800&amp;subset=latin-ext" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.red-pink.min.css" />
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://twemoji.maxcdn.com/2/twemoji.min.js?11.0"></script>
    <link rel="stylesheet" href="{% static 'css/mdl.css' %}">
    <link rel="stylesheet" href="{% static 'css/emoji.css' %}">
    <script src="{% static 'js/emoji.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'cookielaw/css/cookielaw.css' %}" />

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-5522637786617178",
        enable_page_level_ads: true
      });
    </script>

    {% block extra_head %}
    {% endblock %}
  </head>
  <body>
    {% cookielaw_banner %}
    {% block body %}
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="trainerdex-header mdl-layout__header is-casting-shadow">
        <div class="mdl-layout__header-row">
          <span class="trainerdex-title mdl-layout__title">
            <img class="trainerdex-logo-image" src="{% static 'img/logo-text.png' %}">
          </span>
          {# Add spacer, to align navigation to the right in desktop #}
          <div class="mdl-layout-spacer"></div>
          {# Navigation #}
          <div class="trainerdex-header-navigation-container">
            <nav class="trainerdex-header-navigation mdl-navigation">
              {% if user.is_authenticated %}
              <a class="mdl-navigation__link mdl-typography--text-uppercase" href="{% url 'trainerdex:profile' %}">{% user_display user %}</a>{% endif %}
              <a class="mdl-navigation__link mdl-typography--text-uppercase" href="{% url 'trainerdex:leaderboard' %}">{% trans "Leaderboard" %}</a>
              {% if user.trainer.leaderboard_country %}<a class="mdl-navigation__link mdl-typography--text-uppercase" href="{% url 'trainerdex:leaderboard' country=user.trainer.leaderboard_country.code %}">{{user.trainer.leaderboard_country}} {% trans "Leaderboard" %}</a>{% endif %}
            </nav>
          </div>
          <div class="trainerdex-mobile-title mdl-layout-title">
            <img class="trainerdex-logo-image" src="{% static 'img/logo.png' %}">
          </div>
          <button class="trainerdex-more-button mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect" id="more-button">
            <i class="material-icons">more_vert</i>
          </button>
          <ul class="mdl-menu mdl-js-menu mdl-menu--bottom-right mdl-js-ripple-effect" for="more-button">
            {% if user.is_authenticated %}
            <li class="mdl-menu__item" onclick="location.href='{% url 'account_settings' %}';">{% trans "Account Settings" %}</li>
            <li class="mdl-menu__item" onclick="location.href='{% url 'account_logout' %}';">{% trans "Log out" %}</li>
            {% if user.is_staff %}<li class="mdl-menu__item" onclick="location.href='{% url 'admin:index' %}';">{% trans "Admin Panel" %}</li>{% endif %}
            {% else %}
            <li class="mdl-menu__item" onclick="location.href='{% url 'account_login' %}';">{% trans "Login" %}</li>
            <li class="mdl-menu__item" onclick="location.href='{% url 'account_signup' %}';">{% trans "Register" %}</li>
            {% endif %}
          </ul>
        </div>
      </header>
      <div class="trainerdex-drawer mdl-layout__drawer mdl-color--primary-dark mdl-color-text--primary-contrast">
        <header class="trainerdex-drawer-header">
          {% load account %}
          <a href="{% url 'trainerdex:profile' %}">{#<img src="{% get_static_prefix %}{{user.trainer.faction.image|default_if_none: 'img/generic_avatar_male.png'}}" class="trainerdex-avatar">#}</a>
          <div class="trainerdex-avatar-dropdown">
            <span>{%if user.is_authenticated %}{% user_display user %}{% else %}{% trans "Red" context "This is the display name for a user not logged in. Use local references if you like. In English, I've gone for Red, the protagonist in the Gen 1 games." %}{% endif %}</span>
            <div class="mdl-layout-spacer"></div>
            <button id="accbtn" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
              <i class="material-icons" role="presentation">arrow_drop_down</i>
              <span class="visuallyhidden">{% trans "Account Control" %}</span>
            </button>
            <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="accbtn">
              {% if user.is_authenticated %}
              <li class="mdl-menu__item" onclick="location.href='{% url 'account_settings' %}';">{% trans "Account Settings" %}</li>
              <li class="mdl-menu__item" onclick="location.href='{% url 'account_logout' %}';">{% trans "Log out" %}</li>
              {% else %}
              <li class="mdl-menu__item" onclick="location.href='{% url 'account_login' %}';">{% trans "Login" %}</li>
              <li class="mdl-menu__item" onclick="location.href='{% url 'account_signup' %}';">{% trans "Register" %}</li>
              {% endif %}
            </ul>
          </div>
        </header>
        <nav class="trainerdex-navigation mdl-navigation mdl-color--primary mdl-color-text--primary-contrast">
          {%if user.is_authenticated %}
          <a class="mdl-navigation__link" href="{% url 'trainerdex:profile' %}"><i class="material-icons">person</i>{% trans "My Profile" %}</a>{% else %}<a class="mdl-navigation__link mdl-color-text--primary-contrast" href="{% url 'home' %}"><i class="material-icons">home</i>{% trans "Home" %}</a>{% endif %}
          <a class="mdl-navigation__link" href="{% url 'trainerdex:leaderboard' %}"><i class="material-icons" role="presentation">assessment</i>{% trans "Leaderboard" %}</a>
          <div class="mdl-layout-spacer"></div>
          <a class="mdl-navigation__link mdl-button--disabled"><i class="material-icons" role="presentation">help_outline</i><span class="visuallyhidden">{% trans 'Help' %}</span></a>
        </nav>
      </div>

      {% if messages %}{% for message in messages %}
      <div id="trainerdex-toast-message" class="mdl-js-snackbar mdl-snackbar">
        <div class="mdl-snackbar__text"></div>
        <button class="mdl-snackbar__action" type="button"></button>
      </div>
      <script>
      r(function(){
          var snackbarContainer = document.querySelector('#trainerdex-toast-message');
          var data = { message: '{{message}}'};
          snackbarContainer.MaterialSnackbar.showSnackbar(data);
      });
      function r(f){ /in/.test(document.readyState)?setTimeout('r('+f+')',9):f()}
      </script>
      {% endfor %}{% endif %}

      {% block page %}
      <main class="mdl-layout__content mdl-color--grey-100" style="flex: 1 0 auto;">
        {% block content %}
        {% endblock %}
      </main>
      {% endblock %}

      {% endblock %}
      {% block extra_body %}
      {% endblock %}
    </div>

    {% block fab %}
    {% if user.is_authenticated %}
    <a id="trainerdex__fab" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--raised mdl-js-ripple-effect mdl-button--colored" href="{% url 'trainerdex:update_stats' %}"><i class="material-icons">add</i></a>
    {% endif %}
    {% endblock %}

    {% if GOOGLE_ANALYTICS_PROPERTY_ID %}
      {% include "ga.html" %}
    {% endif %}
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mdl-ext@0.17.1/lib/mdl-ext.min.js"></script>
    <script src="{% static 'cookielaw/js/cookielaw.js' %}"></script>
  </body>
</html>
