// apiURL is generated by Django in the HTML
// var apiURL = ''

const downloadUpdate = async() => {
  console.debug("Loading latest Update")
  let r = await fetch(apiURL);
  update = await r.json();
  console.table(update);
}

function renderPreviousValues() {
  for (var field in update) {
    value = update[field]
    if (value) {
      let field_element = document.getElementById(`id_${field}_label`)
      if (field_element) {
        field_element.innerHTML = `Latest: ${Humanize.intComma(value)}`
      }
    }
  }
}

const downloadAndRender = async() => {
  await downloadUpdate();
  renderPreviousValues();
}

downloadAndRender()
