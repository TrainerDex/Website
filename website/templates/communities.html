{% extends "base.html" %}

{% load i18n %}
{% load static %}

{% block head_title %}{% trans "Communities" %}{% endblock %}
{% block section_title %}{% trans "Communities" %}{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'node_modules/status-indicator/styles.css' %}">
{% endblock %}

{% block content %}
        <div class="mdl-grid welcome-content">
          <div class="mdl-grid">
            <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp mdl-cell">
              <thead>
                <tr>
                  <th></th>
                  <th class="mdl-data-table__cell--non-numeric">Name</th>
                  <th class="mdl-data-table__cell--non-numeric">Location</th>
                  <th class="mdl-data-table__cell--non-numeric">Description</th>
                </tr>
              </thead>
              <tbody>
                {% for community in community_list %}
                <tr>
                  <td class="mdl-data-table__cell--non-numeric"><a href="{{ community.invite }}" rel="external"><img width="32px" src="/static/img/{{ community.social }}.svg" onerror="this.src='/static/img/{{ community.social }}.png'"></a></td>
                  <td class="mdl-data-table__cell--non-numeric">{{ community.name }} {% if community.state is 'unknown' %}<status-indicator></status-indicator>{% elif community.state is 'live' %}<status-indicator positive pulse></status-indicator>{% elif community.state is 'dead' %}<status-indicator negative></status-indicator>{% endif %}{% if community.team.name != "Teamless" %}<img width="32px" src="/{{ community.team.image }}" />{% endif %}</td>
                  <td class="mdl-data-table__cell--non-numeric">{% for location in community.locations %}{{ location.name }}{% if location.parent %}, {{ location.parent.name }}{% endif %}<br>{% empty %}Worldwide{% endfor %}</td>
                  <td class="mdl-data-table__cell--non-numeric">{{ community.description }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
{% endblock %}
